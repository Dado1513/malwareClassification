import numpy,scipy.misc, os, array, sys, math
import PIL
from PIL import Image

if len(sys.argv) > 0 :
    filename = sys.argv[1]
    f = open(filename,'rb');
    ln = os.path.getsize(filename); # length of file in bytes
    #print(ln)
    #width = 32;
    #rem = ln%width;
    width = int(math.sqrt(ln))
    rem = ln%width
    a = array.array("B"); # uint8 array
    a.fromfile(f,ln-rem);
    f.close();
    array_numpy = numpy.asarray(a)
    g = numpy.reshape(array_numpy,(width,width));
    g = numpy.uint8(g);
    scipy.misc.imsave(sys.argv[1]+'_image_original.png',g); # save the image
    img = Image.open(sys.argv[1]+'_image.png')
    img = img.resize((32,32), PIL.Image.ANTIALIAS)
    img.save(sys.argv[1]+'_image_resize_32.png')

else:
    print("Error argument not found ")
    print("[*] Usage python3 converter.py name_file.png")
